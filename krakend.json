{
  "$schema": "https://www.krakend.io/schema/v2.11/krakend.json",
  "version": 3,
  "port": 8082,
  "debug_endpoint": true,
  "echo_endpoint": true,
  "endpoints": [
    {
      "endpoint": "/xml-example",
      "method": "GET",
      "output_encoding": "xml",
      "backend": [
        {
          "url_pattern": "/",
          "host": [ "http://unused-mandatory-field" ],
          "extra_config": {
            "backend/http": {
              "return_error_code": true
            },
            "plugin/http-client": {
              "name": "client-example"
            }
          }
        }
      ]
    },
    {
      "endpoint": "/example",
      "method": "GET",
      "backend": [
        {
          "url_pattern": "/__workflow/example",
          "host": ["http://localhost:8082"],
          "extra_config": {
            "plugin/middleware": {
              "name": ["mw-example"]
            },
            "workflow": {
              "endpoint": "/__workflow/example",
              "backend": [
                {
                  "url_pattern": "/__echo/example",
                  "host": ["http://localhost:8082"]
                }
              ],
              "extra_config": {
                "plugin/req-resp-modifier": {
                  "name": [
                    "modifier-example"
                  ]
                }
              }
            }
          }
        }
      ],
      "extra_config": {
        "plugin/req-resp-modifier": {
          "name": [
            "modifier-example"
          ]
        }
      }
    }
  ],
  "extra_config": {
    "router": {
      "return_error_msg": true
    }
  },
  "plugin": {
    "pattern": ".so",
    "folder": "/opt/krakend/plugins/"
  }
}
